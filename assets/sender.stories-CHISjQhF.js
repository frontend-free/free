import{l7 as I,r as u,l8 as H,l9 as z,j as e,la as A,lb as B,F,bZ as k,lc as Z,B as S,hl as $,g4 as J,ld as W,le as R,aO as X,lf as G,X as K}from"./iframe-CdO1iEsn.js";import{I as j}from"./Icon-B1loXNPl.js";import"./preload-helper-PPVm8Dsz.js";var Q=function(n,a){a===void 0&&(a={});var i=I(a),o=u.useRef(void 0);H(function(){var s=z(n);if(s?.addEventListener){var d=function(r,l){var t=r.getData("text/uri-list"),x=r.getData("custom");if(x&&i.current.onDom){var g=x;try{g=JSON.parse(x)}catch{g=x}i.current.onDom(g,l);return}if(t&&i.current.onUri){i.current.onUri(t,l);return}if(r.files&&r.files.length&&i.current.onFiles){i.current.onFiles(Array.from(r.files),l);return}r.items&&r.items.length&&i.current.onText&&r.items[0].getAsString(function(b){i.current.onText(b,l)})},c=function(r){var l,t;r.preventDefault(),r.stopPropagation(),o.current=r.target,(t=(l=i.current).onDragEnter)===null||t===void 0||t.call(l,r)},v=function(r){var l,t;r.preventDefault(),(t=(l=i.current).onDragOver)===null||t===void 0||t.call(l,r)},p=function(r){var l,t;r.target===o.current&&((t=(l=i.current).onDragLeave)===null||t===void 0||t.call(l,r))},m=function(r){var l,t;r.preventDefault(),d(r.dataTransfer,r),(t=(l=i.current).onDrop)===null||t===void 0||t.call(l,r)},f=function(r){var l,t;d(r.clipboardData,r),(t=(l=i.current).onPaste)===null||t===void 0||t.call(l,r)};return s.addEventListener("dragenter",c),s.addEventListener("dragover",v),s.addEventListener("dragleave",p),s.addEventListener("drop",m),s.addEventListener("paste",f),function(){s.removeEventListener("dragenter",c),s.removeEventListener("dragover",v),s.removeEventListener("dragleave",p),s.removeEventListener("drop",m),s.removeEventListener("paste",f)}}},[],n)};const Y=n=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"size-18 text-dbx-static-white",...n},u.createElement("path",{d:"M10.6254 20.3752V6.69549L5.47304 11.8478C4.93607 12.3848 4.0647 12.3848 3.52773 11.8478C2.99076 11.3109 2.99076 10.4395 3.52773 9.90252L11.0277 2.40252L11.1322 2.30877C11.6723 1.86801 12.4695 1.89901 12.973 2.40252L20.473 9.90252L20.5668 10.007C21.0075 10.5471 20.9766 11.3443 20.473 11.8478C19.9695 12.3513 19.1723 12.3823 18.6322 11.9416L18.5277 11.8478L13.3754 6.69549V20.3752C13.3754 21.1346 12.7598 21.7502 12.0004 21.7502C11.241 21.7502 10.6254 21.1346 10.6254 20.3752Z",fill:"currentColor"})),ee=n=>u.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...n},u.createElement("path",{d:"M17.3977 3.9588C15.8361 2.39727 13.3037 2.39727 11.7422 3.9588L5.03365 10.6673C2.60612 13.0952 2.60612 17.0314 5.03365 19.4592C7.46144 21.887 11.3983 21.8875 13.8262 19.4599L20.5348 12.7514C20.8472 12.439 21.3534 12.439 21.6658 12.7514C21.9781 13.0638 21.9782 13.5701 21.6658 13.8825L14.9573 20.591C11.9046 23.6435 6.95518 23.6429 3.90255 20.5903C0.850191 17.5377 0.850191 12.5889 3.90255 9.53624L10.6111 2.82771C12.7975 0.641334 16.3424 0.641334 18.5288 2.82771C20.7149 5.01409 20.7151 8.55906 18.5288 10.7454L11.8699 17.4042C10.5369 18.7372 8.37542 18.7365 7.04241 17.4035C5.70963 16.0705 5.7095 13.9096 7.04241 12.5767L13.7012 5.91785C14.0136 5.60547 14.5199 5.60557 14.8323 5.91785C15.1447 6.23027 15.1447 6.73652 14.8323 7.04894L8.1735 13.7078C7.46543 14.4159 7.46556 15.5642 8.1735 16.2724C8.88167 16.9806 10.03 16.9806 10.7381 16.2724L17.397 9.61358C18.9584 8.05211 18.959 5.52035 17.3977 3.9588Z",fill:"currentColor"}));function D(n){const{value:a,refUpload:i,fileUrls:o,setFileUrls:s,allowUpload:d}=n,{filesMaxCount:c}=d||{},{message:v}=A.useApp(),[p,m]=u.useState(""),[f,r]=u.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(Z,{trigger:["click"],placement:"topLeft",menu:{items:[{key:"add-file",label:"添加图片或文件",icon:e.jsx(j,{component:ee}),onClick:()=>{i.current?.click()}},{key:"add-file-url",label:"添加文件URL",icon:e.jsx(j,{component:J}),onClick:()=>{m(""),r(!0)}}]},children:e.jsx(S,{shape:"circle",icon:e.jsx(j,{component:$,className:"!text-lg"})})}),f&&e.jsx(W,{title:"添加文件URL",open:!0,onCancel:()=>r(!1),onOk:()=>{if(c&&a?.files&&a.files.length>=c){v.warning(`超过最大上传数量${c}`);return}p.trim()&&s([...o,p]),r(!1)},children:e.jsx(R.TextArea,{placeholder:"请输入文件URL",value:p,onChange:l=>m(l.target.value)})})]})}function N(n){const{allowUpload:a,refUpload:i,fileList:o,setFileList:s,uploadMaxCount:d}=n,{uploadAction:c,filesMaxCount:v}=a||{},{message:p}=A.useApp();return e.jsx(B.Dragger,{action:c,fileList:o,multiple:!0,pastable:!0,maxCount:d?d+1:void 0,onChange:m=>{if(d&&m.fileList.length>d){p.warning(`超过最大上传数量${v}`),s(m.fileList.slice(-d));return}s(m.fileList)},children:e.jsx("div",{ref:i,children:"在此处拖放文件"})})}function ne({file:n,onDelete:a}){const i=F.isImage(n.name),o=n.response?.data?.url;return e.jsxs("div",{className:"group relative",children:[i?e.jsx("img",{src:n.originFileObj&&URL.createObjectURL(n.originFileObj),className:"h-[53px] w-[53px] rounded-lg border border-01 bg-01 object-cover"}):e.jsx("div",{className:"flex h-[53px] w-[200px] items-center overflow-hidden rounded bg-01 px-1",children:e.jsx("div",{className:"min-w-0",children:e.jsx(F,{name:n.name,size:n.size})})}),!o&&e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-01/80",children:[(n.percent??0).toFixed(0),"%"]}),e.jsx(k,{className:"absolute right-1 top-1 hidden cursor-pointer rounded-full bg-04 text-white group-hover:block",onClick:a})]})}function re({url:n,onDelete:a}){return e.jsxs("div",{className:"group relative",children:[e.jsx("div",{className:"flex h-[53px] w-[200px] items-center rounded bg-01 px-2",children:e.jsx("div",{className:"line-clamp-2",children:n})}),e.jsx(k,{className:"absolute right-1 top-1 hidden cursor-pointer rounded-full bg-04 text-white group-hover:block",onClick:a})]})}function V(n){const{fileList:a,setFileList:i,fileUrls:o,setFileUrls:s}=n;return e.jsx(e.Fragment,{children:a&&a.length>0&&e.jsxs("div",{className:"scrollbar-hide mb-2 flex gap-2 overflow-x-auto",children:[a.map(d=>e.jsx(ne,{file:d,onDelete:()=>{i(a.filter(c=>c.uid!==d.uid))}},d.uid)),o.map(d=>e.jsx(re,{url:d,onDelete:()=>{s(o.filter(c=>c!==d))}},d))]})})}D.__docgenInfo={description:"",methods:[],displayName:"FileAction",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},refUpload:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},fileUrls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setFileUrls:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileUrls: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"fileUrls"}],return:{name:"void"}}},description:""}}};V.__docgenInfo={description:"",methods:[],displayName:"Files",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},setFileList:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileList: UploadFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},name:"fileList"}],return:{name:"void"}}},description:""},fileUrls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setFileUrls:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileUrls: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"fileUrls"}],return:{name:"void"}}},description:""}}};N.__docgenInfo={description:"",methods:[],displayName:"FileUpload",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},refUpload:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},setFileList:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileList: UploadFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},name:"fileList"}],return:{name:"void"}}},description:""},uploadMaxCount:{required:!1,tsType:{name:"number"},description:""}}};function E(n){const{allowSpeech:a}=n,{recording:i,onRecordingChange:o}=a||{};return i?e.jsx(S,{type:"text",shape:"circle",onClick:()=>o?.(!1),children:e.jsxs("div",{className:"fea-sender-spinner",children:[e.jsx("div",{className:"fea-sender-spinner-line fea-sender-spinner-line1"}),e.jsx("div",{className:"fea-sender-spinner-line fea-sender-spinner-line2"}),e.jsx("div",{className:"fea-sender-spinner-line fea-sender-spinner-line3"}),e.jsx("div",{className:"fea-sender-spinner-line fea-sender-spinner-line4"})]})}):e.jsx(S,{type:"text",shape:"circle",icon:e.jsx(X,{className:"!text-lg"}),onClick:()=>o?.(!0)})}E.__docgenInfo={description:"",methods:[],displayName:"RecordAction",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"}}};function M(n){const{refText:a,loading:i,onSubmit:o,value:s,onChange:d,refUpload:c,isUploading:v,setFileList:p,fileUrls:m,setFileUrls:f,allowUpload:r,allowSpeech:l}=n,t=i||v,x=u.useCallback(async()=>{if(t||l?.recording)return;const g={...s,text:s?.text?.trim()};(g.text||g.files&&g.files.length>0)&&(await Promise.resolve(o?.(g)),p([]),f([]),d?.({}),a.current?.focus())},[t,l?.recording,s,o,p,f,d,a]);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex flex-1 gap-1",children:r&&e.jsx(D,{...n,refUpload:c,fileUrls:m,setFileUrls:f})}),e.jsx(G,{type:"vertical"}),e.jsxs("div",{className:"flex items-center gap-2",children:[l&&e.jsx(E,{...n}),e.jsx(S,{type:"primary",shape:"circle",icon:e.jsx(j,{component:Y,className:"!text-lg"}),loading:t,onClick:x})]})]})}M.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},refText:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLTextAreaElement"}],raw:"RefObject<HTMLTextAreaElement>"},description:""},refUpload:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},isUploading:{required:!0,tsType:{name:"boolean"},description:""},fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},setFileList:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileList: UploadFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},name:"fileList"}],return:{name:"void"}}},description:""},fileUrls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setFileUrls:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileUrls: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"fileUrls"}],return:{name:"void"}}},description:""}}};function ae(n){const{value:a,onChange:i,placeholder:o,refText:s}=n;return e.jsx(R.TextArea,{ref:s,value:a?.text,onChange:d=>{i?.({...a,text:d.target.value})},placeholder:o,autoSize:{minRows:2,maxRows:8},className:"mb-1 px-1 py-0",variant:"borderless"})}const ie={placeholder:"描述你的问题"};function L(n){const a=u.useMemo(()=>({...ie,...n}),[n]),i=u.useRef(null),{value:o,onChange:s,allowUpload:d}=a,{filesMaxCount:c}=d||{},v=u.useRef(null),p=u.useRef(null),[m,f]=u.useState(!1);Q(v,{onDragEnter:()=>{f(!0)},onDragLeave:()=>{f(!1)},onDrop:()=>{f(!1)}});const[r,l]=u.useState([]),[t,x]=u.useState([]),g=u.useCallback(({fileUrls:y,fileList:_})=>{s?.({...o,files:[..._.map(O=>O.response?.data?.url)||[],...y]})},[o,s]),b=u.useCallback(y=>{l(y),g({fileUrls:y,fileList:t})},[t,g]),U=u.useCallback(y=>{x(y),g({fileUrls:r,fileList:y})},[r,g]),P=u.useMemo(()=>t.some(y=>!y.response?.data?.url),[t]);return e.jsxs("div",{className:"fea-sender-wrap",children:[e.jsxs("div",{ref:v,className:K("fea-sender relative flex flex-col rounded-lg border border-01 bg-white p-2",{"fea-sender-drag-hover":m}),children:[e.jsx(V,{...a,fileList:t,setFileList:U,fileUrls:r,setFileUrls:b}),e.jsx("div",{className:"flex",children:e.jsx(ae,{...a,refText:i})}),e.jsx(M,{...a,refText:i,refUpload:p,isUploading:P,fileList:t,setFileList:U,fileUrls:r,setFileUrls:b}),e.jsx(N,{...a,refUpload:p,fileList:t,setFileList:U,uploadMaxCount:c?c-r.length:void 0})]}),e.jsx("div",{className:"mt-1 text-center text-xs text-03",children:"内容由 AI 生成，无法确保信息的真实准确，仅供参考"})]})}L.__docgenInfo={description:"",methods:[],displayName:"Sender",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!0,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"}}};const le={title:"@fe-free/ai/Sender",component:L,tags:["autodocs"]};function T(n){const[a,i]=u.useState(void 0);return e.jsx(L,{value:a,onChange:o=>{console.log("newValue",o),i(o)},onSubmit:o=>{console.log("onSubmit",o)},...n})}const h={render:n=>e.jsx(T,{...n}),args:{onSubmit:n=>{console.log(n)}}},w={args:{loading:!0,onSubmit:n=>{console.log(n)}},render:n=>e.jsx(T,{...n})},C={args:{allowUpload:{uploadAction:"/api/ai-service/v1/file_upload/upload",filesMaxCount:3}},render:n=>e.jsx(T,{...n})},q={render:n=>{const[a,i]=u.useState(!0);return e.jsx(T,{...n,allowSpeech:{recording:a,onRecordingChange:i}})}};h.parameters={...h.parameters,docs:{...h.parameters?.docs,source:{originalSource:`{
  render: props => <Component {...props} />,
  args: {
    onSubmit: value => {
      console.log(value);
    }
  }
}`,...h.parameters?.docs?.source}}};w.parameters={...w.parameters,docs:{...w.parameters?.docs,source:{originalSource:`{
  args: {
    loading: true,
    onSubmit: value => {
      console.log(value);
    }
  },
  render: props => <Component {...props} />
}`,...w.parameters?.docs?.source}}};C.parameters={...C.parameters,docs:{...C.parameters?.docs,source:{originalSource:`{
  args: {
    allowUpload: {
      uploadAction: '/api/ai-service/v1/file_upload/upload',
      filesMaxCount: 3
    }
  },
  render: props => <Component {...props} />
}`,...C.parameters?.docs?.source}}};q.parameters={...q.parameters,docs:{...q.parameters?.docs,source:{originalSource:`{
  render: props => {
    const [recording, setRecording] = useState(true);
    return <Component {...props} allowSpeech={{
      recording,
      onRecordingChange: setRecording
    }} />;
  }
}`,...q.parameters?.docs?.source}}};const de=["Default","Loading","AllowUpload","AllowSpeech"];export{q as AllowSpeech,C as AllowUpload,h as Default,w as Loading,de as __namedExportsOrder,le as default};
