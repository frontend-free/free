import{j as r}from"./jsx-runtime-BjgbQsUx.js";import{_ as P,k as T,P as j,a as u,l as y,m as C,n as h,j as R,r as F}from"./index-Cp8hvRtj.js";import{g as p,d as n}from"./date-CuSWkN_9.js";import{R as M,r as b}from"./index-BTkrZ5ys.js";import"./index-D2MAbzvX.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./index-BqOStK5P.js";import"./index-BIm0odtm.js";import"./iframe-g1IBkNKD.js";import"../sb-preview/runtime.js";var I=["fieldProps","proFieldProps"],c="dateRange",S=M.forwardRef(function(e,a){var t=e.fieldProps,l=e.proFieldProps,s=P(e,I),d=b.useContext(T);return r.jsx(j,u({ref:a,fieldProps:u({getPopupContainer:d.getPopupContainer},t),valueType:c,proFieldProps:l,filedConfig:{valueType:c,customLightMode:!0,lightFilterLabelFormatter:function(v){return y(v,(t==null?void 0:t.format)||"YYYY-MM-DD")}}},s))});const A={dateTime:e=>e?r.jsx("div",{children:p(e).format("YYYY-MM-DD HH:mm:ss")}):r.jsx("div",{children:"-"}),date:e=>e?r.jsx("div",{children:p(e).format("YYYY-MM-DD")}):r.jsx("div",{children:"-"})},N={dateRange:(e,a)=>r.jsx(S,{...a,fieldProps:{...a.fieldProps,onChange:t=>{var s,d;const l=t&&[n(t[0]).startOf("day"),n(t[1]).endOf("day")];(d=(s=a.fieldProps).onChange)==null||d.call(s,l)}}})},i={renderMap:A,renderFormItemMap:N};function Y(e){let a=e;if(!e)return r.jsx("div",{children:"-"});try{a=JSON.stringify(JSON.parse(e),null,2)}catch(t){console.error(t,e)}return r.jsx(C.Text,{className:"block max-w-full overflow-hidden",ellipsis:{tooltip:{title:r.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:a})}},children:e})}const f={render:Y,renderFormItem:()=>r.jsx(r.Fragment,{})};var o=(e=>(e.CustomDateTimeAndDateRange="CustomDateTimeAndDateRange",e.CustomDateAndDateRange="CustomDateAndDateRange",e.CustomJSON="CustomJSON",e))(o||{});const w={CustomDateTimeAndDateRange:{render:i.renderMap.dateTime,renderFormItem:i.renderFormItemMap.dateRange},CustomDateAndDateRange:{render:i.renderMap.date,renderFormItem:i.renderFormItemMap.dateRange},CustomJSON:{render:f.render,renderFormItem:f.renderFormItem}},B={title:"@fe-free/core/ValueTypeMap",component:h,parameters:{layout:"centered"},tags:["autodocs"]};async function O(){const e=F(5).map(a=>({id:`${a}`,timeStr:"2024-10-01 10:00:00",timeNumber:+n("2024-10-01 10:00:00"),dateStr:"2024-10-01",dateNumber:+n("2024-10-01"),seconds:Math.abs(+n("2024-10-01")/1e3),jsonText:JSON.stringify({name:"hello world hello world hello world"})}));return Promise.resolve({data:e,success:!0,total:100})}const J=()=>{const e=[{title:"id",dataIndex:"id"},{title:"时间 str",dataIndex:"timeStr",valueType:o.CustomDateTimeAndDateRange,search:!0},{title:"时间 number",dataIndex:"timeNumber",valueType:o.CustomDateTimeAndDateRange,search:!0},{title:"日期 str",dataIndex:"dateStr",valueType:o.CustomDateAndDateRange,search:!0},{title:"日期 number",dataIndex:"dateNumber",valueType:o.CustomDateAndDateRange,search:!0},{title:"日期 number 秒",dataIndex:"seconds",valueType:o.CustomDateAndDateRange,search:!0},{title:"json",dataIndex:"jsonText",ellipsis:!0,valueType:o.CustomJSON}];return r.jsx(R,{actions:[],tableProps:{columns:e,request:O}})},m={render:()=>r.jsx(h,{valueTypeMap:w,children:r.jsx(J,{})})};var g,D,x;m.parameters={...m.parameters,docs:{...(g=m.parameters)==null?void 0:g.docs,source:{originalSource:`{
  render: () => <ProConfigProvider valueTypeMap={customValueTypeMap}>
      <Table />
    </ProConfigProvider>
}`,...(x=(D=m.parameters)==null?void 0:D.docs)==null?void 0:x.source}}};const G=["Default"];export{m as Default,G as __namedExportsOrder,B as default};
