import{j as r}from"./jsx-runtime-TjNF8EJ0.js";import{_ as y,x as v,P as C,a as c,y as P,z as T,A as F,d as M,D as j,w as R,t as S}from"./localforage-D7AXApJS.js";import{g as f}from"./date-Clclsp2H.js";import{e as N,r as D}from"./iframe-CLePEaeZ.js";import{d as i}from"./isNumber-DWr_q2IE.js";import"./index-Dw8jUQq6.js";import"./index-kd-uQ2ks.js";import"./preload-helper-D9Z9MdNV.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";var I=["fieldProps","proFieldProps"],g="dateRange",O=N.forwardRef(function(e,t){var a=e.fieldProps,d=e.proFieldProps,s=y(e,I),o=D.useContext(v);return r.jsx(C,c({ref:t,fieldProps:c({getPopupContainer:o.getPopupContainer},a),valueType:g,proFieldProps:d,filedConfig:{valueType:g,customLightMode:!0,lightFilterLabelFormatter:function(p){return P(p,a?.format||"YYYY-MM-DD")}}},s))});const b={dateTime:e=>e?r.jsx("div",{children:f(e).format("YYYY-MM-DD HH:mm:ss")}):r.jsx("div",{children:"-"}),date:e=>e?r.jsx("div",{children:f(e).format("YYYY-MM-DD")}):r.jsx("div",{children:"-"})},w={dateRange:(e,t)=>{const{onBlur:a,fieldProps:d,...s}=t;return r.jsx(O,{...s,fieldProps:{...d,onChange:(o,...l)=>{const p=o&&[i(o[0]).startOf("day"),i(o[1]).endOf("day")];t.fieldProps.onChange?.(p,...l)}}})}},m={renderMap:b,renderFormItemMap:w};function J(e){let t=e;if(!e)return r.jsx("div",{children:"-"});try{t=JSON.stringify(JSON.parse(e),null,2)}catch(a){console.error(a,e)}return r.jsx(T.Text,{className:"block max-w-full overflow-hidden",ellipsis:{tooltip:{title:r.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:t})}},children:e})}const x={render:J,renderFormItem:()=>r.jsx(r.Fragment,{})};function A(e,t){const{title:a="查看"}=t.fieldProps||{},[d,s]=D.useState(!1);let o=e;if(!e)return r.jsx("div",{children:"-"});try{o=JSON.stringify(JSON.parse(e),null,2)}catch(l){console.error(l,e)}return r.jsxs(r.Fragment,{children:[r.jsx("a",{onClick:()=>s(!0),children:a}),r.jsx(F,{title:a,open:d,onCancel:()=>s(!1),onOk:()=>s(!1),cancelButtonProps:{style:{display:"none"}},children:r.jsx("div",{className:"h-[500px]",children:r.jsx(M,{value:o,readonly:!0})})})]})}const h={render:A,renderFormItem:()=>r.jsx(r.Fragment,{})};var n=(e=>(e.CustomDateTimeAndDateRange="CustomDateTimeAndDateRange",e.CustomDateAndDateRange="CustomDateAndDateRange",e.CustomJSON="CustomJSON",e.CustomJSONModal="CustomJSONModal",e))(n||{});const Y={CustomDateTimeAndDateRange:{render:m.renderMap.dateTime,renderFormItem:m.renderFormItemMap.dateRange},CustomDateAndDateRange:{render:m.renderMap.date,renderFormItem:m.renderFormItemMap.dateRange},CustomJSON:{render:x.render,renderFormItem:x.renderFormItem},CustomJSONModal:{render:h.render,renderFormItem:h.renderFormItem}},$={title:"@fe-free/core/ValueTypeMap",component:j,parameters:{layout:"centered"},tags:["autodocs"]};async function k(){const e=S(5).map(t=>({id:`${t}`,timeStr:"2024-10-01 10:00:00",timeNumber:+i("2024-10-01 10:00:00"),dateStr:"2024-10-01",dateNumber:+i("2024-10-01"),seconds:Math.abs(+i("2024-10-01")/1e3),jsonText:JSON.stringify({name:"hello world hello world hello world"})}));return Promise.resolve({data:e,success:!0,total:100})}const _=()=>{const e=[{title:"id",dataIndex:"id"},{title:"时间 str",dataIndex:"timeStr",valueType:n.CustomDateTimeAndDateRange,search:!0},{title:"时间 number",dataIndex:"timeNumber",valueType:n.CustomDateTimeAndDateRange,search:!0},{title:"日期 str",dataIndex:"dateStr",valueType:n.CustomDateAndDateRange,search:!0},{title:"日期 number",dataIndex:"dateNumber",valueType:n.CustomDateAndDateRange,search:!0},{title:"日期 number 秒",dataIndex:"seconds",valueType:n.CustomDateAndDateRange,search:!0},{title:"json",dataIndex:"jsonText",ellipsis:!0,valueType:n.CustomJSON},{title:"jsonModal",dataIndex:"jsonText",ellipsis:!0,valueType:n.CustomJSONModal}];return r.jsx(R,{actions:[],tableProps:{columns:e,request:k}})},u={render:()=>r.jsx(j,{valueTypeMap:Y,children:r.jsx(_,{})})};u.parameters={...u.parameters,docs:{...u.parameters?.docs,source:{originalSource:`{
  render: () => <ProConfigProvider valueTypeMap={customValueTypeMap}>
      <Table />
    </ProConfigProvider>
}`,...u.parameters?.docs?.source}}};const G=["Default"];export{u as Default,G as __namedExportsOrder,$ as default};
