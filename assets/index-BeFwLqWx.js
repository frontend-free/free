import{lp as z,r as o,lq as W,lr as Q,j as r,z as A,F as U,ls as G,d as J,X as q,B as b,lt as S,lu as L,lm as F,lv as K,bZ as P,lw as X,hl as ee,g4 as ne,lx as re,aO as te,ly as ae}from"./iframe-B2t26p-v.js";import{I as C}from"./Icon-CWFLi4sS.js";var ie=function(e,n){n===void 0&&(n={});var t=z(n),a=o.useRef(void 0);W(function(){var i=Q(e);if(i?.addEventListener){var s=function(l,u){var c=l.getData("text/uri-list"),m=l.getData("custom");if(m&&t.current.onDom){var h=m;try{h=JSON.parse(m)}catch{h=m}t.current.onDom(h,u);return}if(c&&t.current.onUri){t.current.onUri(c,u);return}if(l.files&&l.files.length&&t.current.onFiles){t.current.onFiles(Array.from(l.files),u);return}l.items&&l.items.length&&t.current.onText&&l.items[0].getAsString(function(w){t.current.onText(w,u)})},d=function(l){var u,c;l.preventDefault(),l.stopPropagation(),a.current=l.target,(c=(u=t.current).onDragEnter)===null||c===void 0||c.call(u,l)},g=function(l){var u,c;l.preventDefault(),(c=(u=t.current).onDragOver)===null||c===void 0||c.call(u,l)},p=function(l){var u,c;l.target===a.current&&((c=(u=t.current).onDragLeave)===null||c===void 0||c.call(u,l))},v=function(l){var u,c;l.preventDefault(),s(l.dataTransfer,l),(c=(u=t.current).onDrop)===null||c===void 0||c.call(u,l)},f=function(l){var u,c;s(l.clipboardData,l),(c=(u=t.current).onPaste)===null||c===void 0||c.call(u,l)};return i.addEventListener("dragenter",d),i.addEventListener("dragover",g),i.addEventListener("dragleave",p),i.addEventListener("drop",v),i.addEventListener("paste",f),function(){i.removeEventListener("dragenter",d),i.removeEventListener("dragover",g),i.removeEventListener("dragleave",p),i.removeEventListener("drop",v),i.removeEventListener("paste",f)}}},[],e)};function se({end:e,endClassName:n,children:t,childrenClassName:a}){return r.jsx(A,{direction:"vertical",end:e,endClassName:n,childrenClassName:a,children:t})}se.__docgenInfo={description:"",methods:[],displayName:"Chat",props:{end:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},endClassName:{required:!1,tsType:{name:"string"},description:""},children:{required:!1,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},childrenClassName:{required:!1,tsType:{name:"string"},description:""}}};function oe(e){return e.startsWith("http")||e.startsWith("https")}function T({url:e,isImage:n}){const t=n??U.isImage(e),a=oe(e)?decodeURIComponent(e):e,i=a.split("/").pop()||a;return r.jsx("div",{className:"fea-file-view",children:t?r.jsx(G,{width:60,height:60,src:e}):r.jsx("div",{className:"flex h-[60px] w-[250px] items-center rounded bg-01 px-1",children:r.jsx("div",{className:"min-w-0",children:r.jsx(U,{name:i})})})})}function le({urls:e}){return r.jsx("div",{className:"flex flex-wrap gap-2",children:e.map(n=>r.jsx(T,{url:n},n))})}T.__docgenInfo={description:"",methods:[],displayName:"FileView",props:{url:{required:!0,tsType:{name:"string"},description:""},isImage:{required:!1,tsType:{name:"boolean"},description:""}}};le.__docgenInfo={description:"",methods:[],displayName:"FileViewList",props:{urls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""}}};const y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));function de(e,n=0){return(y[e[n+0]]+y[e[n+1]]+y[e[n+2]]+y[e[n+3]]+"-"+y[e[n+4]]+y[e[n+5]]+"-"+y[e[n+6]]+y[e[n+7]]+"-"+y[e[n+8]]+y[e[n+9]]+"-"+y[e[n+10]]+y[e[n+11]]+y[e[n+12]]+y[e[n+13]]+y[e[n+14]]+y[e[n+15]]).toLowerCase()}let R;const ue=new Uint8Array(16);function ce(){if(!R){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");R=crypto.getRandomValues.bind(crypto)}return R(ue)}const me=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),N={randomUUID:me};function pe(e,n,t){e=e||{};const a=e.random??e.rng?.()??ce();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,de(a)}function ge(e,n,t){return N.randomUUID&&!e?N.randomUUID():pe(e)}function fe(e){const n=[.1,.2,.4,.6,.8,.9];return n[e%n.length]}function M({count:e=4,gap:n=2,color:t="white"}){return r.jsx("div",{className:"flex h-0 gap-[2px]",style:{gap:`${n}px`},children:J(e).map(a=>r.jsx("div",{className:q({"bg-white":t==="white","bg-primary":t==="primary"}),style:{height:"4px",width:"2px",animation:`sender-rectangle-${t} infinite 1s ease-in-out ${fe(a)}s`}},a))})}function Le(){return ge()}M.__docgenInfo={description:"",methods:[],displayName:"RecordLoading",props:{count:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"4",computed:!1}},height:{required:!1,tsType:{name:"number"},description:""},width:{required:!1,tsType:{name:"number"},description:""},gap:{required:!1,tsType:{name:"number"},description:"",defaultValue:{value:"2",computed:!1}},color:{required:!1,tsType:{name:"union",raw:"'white' | 'primary'",elements:[{name:"literal",value:"'white'"},{name:"literal",value:"'primary'"}]},description:"",defaultValue:{value:"'white'",computed:!1}}}};const ve=e=>o.createElement("svg",{width:14,height:18,viewBox:"0 0 14 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},o.createElement("path",{d:"M1.46387 8.41895C1.46399 11.2488 3.75802 13.5429 6.58789 13.543C9.41782 13.543 11.7118 11.2488 11.7119 8.41895H13.1758C13.1757 11.8102 10.6136 14.6009 7.31934 14.9648V17.2031H5.85547V14.9648C2.56181 14.6004 0.000112876 11.8097 0 8.41895H1.46387ZM6.58789 0C8.60932 0 10.248 1.63873 10.248 3.66016V8.41797C10.248 10.4394 8.60932 12.0781 6.58789 12.0781C4.56664 12.0779 2.92773 10.4393 2.92773 8.41797V3.66016C2.92775 1.63887 4.56665 0.000220666 6.58789 0Z"})),E=e=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",className:"size-18 text-dbx-static-white",...e},o.createElement("path",{d:"M10.6254 20.3752V6.69549L5.47304 11.8478C4.93607 12.3848 4.0647 12.3848 3.52773 11.8478C2.99076 11.3109 2.99076 10.4395 3.52773 9.90252L11.0277 2.40252L11.1322 2.30877C11.6723 1.86801 12.4695 1.89901 12.973 2.40252L20.473 9.90252L20.5668 10.007C21.0075 10.5471 20.9766 11.3443 20.473 11.8478C19.9695 12.3513 19.1723 12.3823 18.6322 11.9416L18.5277 11.8478L13.3754 6.69549V20.3752C13.3754 21.1346 12.7598 21.7502 12.0004 21.7502C11.241 21.7502 10.6254 21.1346 10.6254 20.3752Z",fill:"currentColor"}));function k(e){const{refText:n,loading:t,onSubmit:a,value:i,onChange:s,setType:d,allowSpeech:g}=e,p=t,v=o.useCallback(async()=>{if(p||i?.text?.trim()==="")return;const f={...i,text:i?.text?.trim()};(f.text||f.files&&f.files.length>0)&&(await Promise.resolve(a?.(f)),s?.({}),n.current?.focus())},[p,i,a,s,n]);return r.jsx("div",{className:"mr-1 flex items-center gap-2",children:g&&!i?.text?r.jsx(b,{type:"primary",shape:"circle",icon:r.jsx(C,{component:ve}),onClick:()=>d("record")}):r.jsx(b,{type:"primary",shape:"circle",icon:r.jsx(C,{component:E}),loading:p,onClick:v})})}k.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{value:{required:!1,tsType:{name:"MSenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: MSenderValue) => void",signature:{arguments:[{type:{name:"MSenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: MSenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"MSenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 录音开始时回调，如果没权限，则 reject */
  onRecordStart?: () => Promise<void>;
  /** 录音结束时回调, isSend 为 true 则发送，否则取消 */
  onRecordEnd?: (isSend: boolean) => Promise<void>;
}`,signature:{properties:[{key:"onRecordStart",value:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}},required:!1},description:"录音开始时回调，如果没权限，则 reject"},{key:"onRecordEnd",value:{name:"signature",type:"function",raw:"(isSend: boolean) => Promise<void>",signature:{arguments:[{type:{name:"boolean"},name:"isSend"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}},required:!1},description:"录音结束时回调, isSend 为 true 则发送，否则取消"}]}},description:"是否允许语音输入"},defaultType:{required:!1,tsType:{name:"union",raw:"'input' | 'record'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'record'"}]},description:""},statement:{required:!1,tsType:{name:"string"},description:""},refText:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLTextAreaElement"}],raw:"RefObject<HTMLTextAreaElement>"},description:""},type:{required:!0,tsType:{name:"union",raw:"'input' | 'record'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'record'"}]},description:""},setType:{required:!0,tsType:{name:"signature",type:"function",raw:"(type: 'input' | 'record') => void",signature:{arguments:[{type:{name:"union",raw:"'input' | 'record'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'record'"}]},name:"type"}],return:{name:"void"}}},description:""}}};const ye=e=>o.createElement("svg",{width:20,height:18,viewBox:"0 0 20 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},o.createElement("path",{d:"M14.9561 0C15.6719 -6.75109e-08 16.2617 -0.000981836 16.7402 0.0380859C17.2288 0.0780087 17.6787 0.164078 18.1006 0.378906C18.7546 0.712247 19.2867 1.24447 19.6201 1.89844C19.8351 2.32031 19.921 2.77023 19.9609 3.25879C20 3.7373 19.999 4.32705 19.999 5.04297V12.3477C19.999 13.0634 20 13.6534 19.9609 14.1318C19.921 14.6203 19.8349 15.0694 19.6201 15.4912C19.2867 16.1456 18.7549 16.6782 18.1006 17.0117C17.6786 17.2267 17.2289 17.3126 16.7402 17.3525C16.2617 17.3916 15.672 17.3906 14.9561 17.3906H5.04297C4.32702 17.3906 3.73732 17.3916 3.25879 17.3525C2.77019 17.3126 2.32034 17.2267 1.89844 17.0117C1.24428 16.6782 0.712259 16.1455 0.378906 15.4912C0.1642 15.0695 0.078011 14.6202 0.0380859 14.1318C-0.000970309 13.6534 -2.36304e-07 13.0634 0 12.3477V5.04297C-4.75188e-07 4.32705 -0.00100976 3.7373 0.0380859 3.25879C0.0780378 2.7702 0.163945 2.32032 0.378906 1.89844C0.712319 1.24436 1.24435 0.712298 1.89844 0.378906C2.32035 0.163931 2.77017 0.0780345 3.25879 0.0380859C3.73732 -0.00101134 4.32702 -3.93286e-07 5.04297 0H14.9561ZM5.04297 1.73828C4.29836 1.73828 3.79169 1.73951 3.40039 1.77148C3.01944 1.80264 2.82442 1.85944 2.68848 1.92871C2.36139 2.09541 2.09543 2.3614 1.92871 2.68848C1.85945 2.82441 1.80264 3.0195 1.77148 3.40039C1.73951 3.79168 1.73828 4.29841 1.73828 5.04297V12.3477C1.73828 13.092 1.73955 13.599 1.77148 13.9902C1.8026 14.3707 1.85956 14.5662 1.92871 14.7021C2.09537 15.0291 2.36157 15.2952 2.68848 15.4619C2.82441 15.5312 3.01958 15.588 3.40039 15.6191C3.79169 15.6511 4.29836 15.6514 5.04297 15.6514H14.9561C15.7006 15.6514 16.2073 15.6511 16.5986 15.6191C16.9796 15.588 17.1746 15.5312 17.3105 15.4619C17.6377 15.2952 17.9036 15.0293 18.0703 14.7021C18.1395 14.5662 18.1964 14.371 18.2275 13.9902C18.2595 13.599 18.2607 13.092 18.2607 12.3477V5.04297C18.2607 4.29841 18.2595 3.79168 18.2275 3.40039C18.1964 3.01955 18.1396 2.82441 18.0703 2.68848C17.9036 2.36151 17.6376 2.09536 17.3105 1.92871C17.1746 1.85954 16.9793 1.8026 16.5986 1.77148C16.2073 1.73954 15.7006 1.73828 14.9561 1.73828H5.04297ZM14.7822 12.1738C15.2625 12.1738 15.6523 12.5637 15.6523 13.0439C15.6521 13.5239 15.2623 13.9131 14.7822 13.9131H5.2168C4.73692 13.9129 4.34795 13.5238 4.34766 13.0439C4.34766 12.5638 4.73674 12.174 5.2168 12.1738H14.7822ZM6.08691 7.82617C6.56708 7.82626 6.95605 8.2161 6.95605 8.69629V9.56543C6.95592 10.0455 6.567 10.4345 6.08691 10.4346H5.2168C4.73683 10.4344 4.3478 10.0454 4.34766 9.56543V8.69629C4.34766 8.21618 4.73674 7.82639 5.2168 7.82617H6.08691ZM10.4346 7.82617C10.9148 7.82618 11.3047 8.21605 11.3047 8.69629V9.56543C11.3045 10.0456 10.9147 10.4346 10.4346 10.4346H9.56543C9.08527 10.4346 8.69545 10.0456 8.69531 9.56543V8.69629C8.69531 8.21605 9.08519 7.82617 9.56543 7.82617H10.4346ZM14.7822 7.82617C15.2624 7.82627 15.6514 8.21611 15.6514 8.69629V9.56543C15.6512 10.0455 15.2623 10.4345 14.7822 10.4346H13.9121C13.4321 10.4344 13.0431 10.0454 13.043 9.56543V8.69629C13.043 8.21618 13.432 7.82638 13.9121 7.82617H14.7822ZM6.08691 3.47852C6.56695 3.4786 6.95583 3.86766 6.95605 4.34766V5.21777C6.95585 5.69779 6.56696 6.08683 6.08691 6.08691H5.2168C4.73687 6.08669 4.34787 5.6977 4.34766 5.21777V4.34766C4.34788 3.86774 4.73688 3.47874 5.2168 3.47852H6.08691ZM10.4346 3.47852C10.9147 3.47852 11.3045 3.86761 11.3047 4.34766V5.21777C11.3045 5.69784 10.9147 6.08691 10.4346 6.08691H9.56543C9.08532 6.08691 8.69552 5.69784 8.69531 5.21777V4.34766C8.69554 3.86761 9.08533 3.47852 9.56543 3.47852H10.4346ZM14.7822 3.47852C15.2622 3.47861 15.6511 3.86767 15.6514 4.34766V5.21777C15.6512 5.69778 15.2623 6.08682 14.7822 6.08691H13.9121C13.4322 6.0867 13.0432 5.69771 13.043 5.21777V4.34766C13.0432 3.86774 13.4322 3.47872 13.9121 3.47852H14.7822Z"}));function D(e){const{allowSpeech:n,setType:t}=e,a=o.useRef(null),i=o.useRef(0),[s,d]=o.useState(!1),g=o.useRef(!1),[p,v]=o.useState(!1),f=o.useCallback(async m=>{m.preventDefault(),await n?.onRecordStart?.();const h=m.touches[0];i.current=h.clientY,g.current=!1,v(!1),d(!0)},[n]),l=o.useCallback(m=>{if(m.preventDefault(),!s)return;const h=m.touches[0];i.current-h.clientY>50?g.current||(g.current=!0,v(!0)):g.current&&(g.current=!1,v(!1))},[s]),u=o.useCallback(async m=>{if(m.preventDefault(),!!s){try{await n?.onRecordEnd?.(!g.current)}catch(h){console.error(h)}d(!1),v(!1),g.current=!1,i.current=0}},[n,s]),c=o.useCallback(async m=>{m.preventDefault(),await n?.onRecordEnd?.(!1),d(!1),v(!1),g.current=!1,i.current=0},[n]);return o.useEffect(()=>{const m=a.current;if(m)return m.addEventListener("touchstart",f,{passive:!1}),m.addEventListener("touchmove",l,{passive:!1}),m.addEventListener("touchend",u,{passive:!1}),m.addEventListener("touchcancel",c,{passive:!1}),()=>{m.removeEventListener("touchstart",f),m.removeEventListener("touchmove",l),m.removeEventListener("touchend",u),m.removeEventListener("touchcancel",c)}},[f,l,u,c]),r.jsxs("div",{className:q("absolute inset-0 flex items-center justify-center rounded-xl",{"bg-red-500":p,"bg-primary":!p}),children:[s?r.jsxs(r.Fragment,{children:[r.jsx(M,{count:30,gap:4}),p&&r.jsx("div",{className:"absolute top-0 -mt-[2.5em] text-red08",children:"松开取消"}),!p&&r.jsx("div",{className:"absolute top-0 -mt-[2.5em] text-03",children:"松开发送，上移取消"})]}):r.jsx("div",{className:"text-base text-white",children:"按住说话"}),r.jsx("div",{className:"absolute inset-0",ref:a}),!s&&r.jsx(b,{type:"text",shape:"circle",icon:r.jsx(C,{component:ye,className:"!text-xl text-white"}),onClick:()=>{t("input")},className:"absolute right-4"})]})}D.__docgenInfo={description:"",methods:[],displayName:"RecordAction",props:{value:{required:!1,tsType:{name:"MSenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: MSenderValue) => void",signature:{arguments:[{type:{name:"MSenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: MSenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"MSenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 录音开始时回调，如果没权限，则 reject */
  onRecordStart?: () => Promise<void>;
  /** 录音结束时回调, isSend 为 true 则发送，否则取消 */
  onRecordEnd?: (isSend: boolean) => Promise<void>;
}`,signature:{properties:[{key:"onRecordStart",value:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}},required:!1},description:"录音开始时回调，如果没权限，则 reject"},{key:"onRecordEnd",value:{name:"signature",type:"function",raw:"(isSend: boolean) => Promise<void>",signature:{arguments:[{type:{name:"boolean"},name:"isSend"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}},required:!1},description:"录音结束时回调, isSend 为 true 则发送，否则取消"}]}},description:"是否允许语音输入"},defaultType:{required:!1,tsType:{name:"union",raw:"'input' | 'record'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'record'"}]},description:""},statement:{required:!1,tsType:{name:"string"},description:""}}};function he(e){const{value:n,onChange:t,placeholder:a,refText:i,autoFocus:s}=e;return r.jsx(L.TextArea,{ref:i,value:n?.text,autoFocus:s,onChange:d=>{t?.({...n,text:d.target.value})},placeholder:a,autoSize:{minRows:1,maxRows:3},className:"px-1 text-[15px]",variant:"borderless"})}function xe(e){const{t:n}=S();return o.useMemo(()=>({...e,placeholder:e.placeholder??n("@fe-free/ai.sender.describeYourQuestion","描述你的问题"),defaultType:e.defaultType??"input"}),[e,n])}function we(e){const n=o.useRef(null),t=xe(e),{statement:a,defaultType:i}=t,[s,d]=o.useState(i),g=o.useRef(null);return r.jsxs("div",{className:"fea-m-sender-wrap",children:[r.jsxs("div",{ref:g,className:q("fea-m-sender relative flex items-end rounded-xl border border-01 bg-white p-2.5"),children:[r.jsx("div",{className:"flex flex-1",children:r.jsx(he,{...t,refText:n})}),r.jsx(k,{...t,refText:n,type:s,setType:d}),s==="record"&&r.jsx(D,{...t,setType:d})]}),a&&r.jsxs("div",{className:"mt-1 text-center text-xs text-04",children:["*",a]})]})}we.__docgenInfo={description:"",methods:[],displayName:"MSender",props:{value:{required:!1,tsType:{name:"MSenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: MSenderValue) => void",signature:{arguments:[{type:{name:"MSenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: MSenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"MSenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},autoFocus:{required:!1,tsType:{name:"boolean"},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 录音开始时回调，如果没权限，则 reject */
  onRecordStart?: () => Promise<void>;
  /** 录音结束时回调, isSend 为 true 则发送，否则取消 */
  onRecordEnd?: (isSend: boolean) => Promise<void>;
}`,signature:{properties:[{key:"onRecordStart",value:{name:"signature",type:"function",raw:"() => Promise<void>",signature:{arguments:[],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}},required:!1},description:"录音开始时回调，如果没权限，则 reject"},{key:"onRecordEnd",value:{name:"signature",type:"function",raw:"(isSend: boolean) => Promise<void>",signature:{arguments:[{type:{name:"boolean"},name:"isSend"}],return:{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}},required:!1},description:"录音结束时回调, isSend 为 true 则发送，否则取消"}]}},description:"是否允许语音输入"},defaultType:{required:!1,tsType:{name:"union",raw:"'input' | 'record'",elements:[{name:"literal",value:"'input'"},{name:"literal",value:"'record'"}]},description:""},statement:{required:!1,tsType:{name:"string"},description:""}}};function Ce(e){const{messages:n,renderMessageOfUser:t,renderMessageOfAI:a}=e,i=o.useRef(null),s=o.useMemo(()=>n?.[n.length-1],[n]);return o.useEffect(()=>{if(!s?.uuid)return;const d=document.querySelector(`[data-uuid="${s.uuid}"]`);d&&d.scrollIntoView({behavior:"smooth"})},[s?.uuid]),o.useEffect(()=>{if(!s?.updatedAt||!s?.uuid||!i.current)return;const d=document.querySelector(`[data-uuid="${s.uuid}"]`);if(!d)return;const{top:g,bottom:p}=i.current.getBoundingClientRect(),{top:v,bottom:f}=d.getBoundingClientRect();v<p&&f>g&&d.scrollIntoView({behavior:"smooth"})},[s?.updatedAt,s?.uuid]),r.jsx(A,{children:r.jsx("div",{ref:i,className:"flex h-full flex-col overflow-y-auto",children:n?.map(d=>r.jsxs("div",{"data-uuid":d.uuid,className:"flex flex-col",children:[r.jsx("div",{className:"flex justify-end",children:t?.({message:d})}),r.jsx("div",{className:"flex justify-start",children:a?.({message:d})})]},d.uuid))})})}Ce.__docgenInfo={description:"",methods:[],displayName:"Messages",props:{messages:{required:!1,tsType:{name:"Array",elements:[{name:"ChatMessage",elements:[{name:"AIData"}],raw:"ChatMessage<AIData>"}],raw:"ChatMessage<AIData>[]"},description:""},renderMessageOfUser:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { message: ChatMessage<AIData> }) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ message: ChatMessage<AIData> }",signature:{properties:[{key:"message",value:{name:"ChatMessage",elements:[{name:"AIData"}],raw:"ChatMessage<AIData>",required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""},renderMessageOfAI:{required:!1,tsType:{name:"signature",type:"function",raw:"(props: { message: ChatMessage<AIData> }) => React.ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{ message: ChatMessage<AIData> }",signature:{properties:[{key:"message",value:{name:"ChatMessage",elements:[{name:"AIData"}],raw:"ChatMessage<AIData>",required:!0}}]}},name:"props"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:""}}};const be=e=>o.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e},o.createElement("path",{d:"M17.3977 3.9588C15.8361 2.39727 13.3037 2.39727 11.7422 3.9588L5.03365 10.6673C2.60612 13.0952 2.60612 17.0314 5.03365 19.4592C7.46144 21.887 11.3983 21.8875 13.8262 19.4599L20.5348 12.7514C20.8472 12.439 21.3534 12.439 21.6658 12.7514C21.9781 13.0638 21.9782 13.5701 21.6658 13.8825L14.9573 20.591C11.9046 23.6435 6.95518 23.6429 3.90255 20.5903C0.850191 17.5377 0.850191 12.5889 3.90255 9.53624L10.6111 2.82771C12.7975 0.641334 16.3424 0.641334 18.5288 2.82771C20.7149 5.01409 20.7151 8.55906 18.5288 10.7454L11.8699 17.4042C10.5369 18.7372 8.37542 18.7365 7.04241 17.4035C5.70963 16.0705 5.7095 13.9096 7.04241 12.5767L13.7012 5.91785C14.0136 5.60547 14.5199 5.60557 14.8323 5.91785C15.1447 6.23027 15.1447 6.73652 14.8323 7.04894L8.1735 13.7078C7.46543 14.4159 7.46556 15.5642 8.1735 16.2724C8.88167 16.9806 10.03 16.9806 10.7381 16.2724L17.397 9.61358C18.9584 8.05211 18.959 5.52035 17.3977 3.9588Z",fill:"currentColor"}));function I(e){const{value:n,refUpload:t,fileUrls:a,setFileUrls:i,allowUpload:s}=e,{filesMaxCount:d}=s||{},{message:g}=F.useApp(),{t:p}=S(),[v,f]=o.useState(""),[l,u]=o.useState(!1);return r.jsxs(r.Fragment,{children:[r.jsx(X,{trigger:["click"],placement:"topLeft",menu:{items:[{key:"add-file",label:p("@fe-free/ai.sender.addImageOrFile","添加图片或文件"),icon:r.jsx(C,{component:be}),onClick:()=>{t.current?.click()}},{key:"add-file-url",label:p("@fe-free/ai.sender.addFileUrl","添加文件URL"),icon:r.jsx(C,{component:ne}),onClick:()=>{f(""),u(!0)}}]},children:r.jsx(b,{shape:"circle",icon:r.jsx(C,{component:ee,className:"!text-lg"})})}),l&&r.jsx(re,{title:p("@fe-free/ai.sender.addFileUrl","添加文件URL"),open:!0,onCancel:()=>u(!1),onOk:()=>{if(d&&n?.files&&n.files.length>=d){g.warning(p("@fe-free/ai.sender.exceedMaxUploadCount","超过最大上传数量{count}",{count:d}));return}v.trim()&&i([...a,v]),u(!1)},children:r.jsx(L.TextArea,{placeholder:p("@fe-free/ai.sender.pleaseEnterFileUrl","请输入文件URL"),value:v,onChange:c=>f(c.target.value)})})]})}function _(e){const{allowUpload:n,refUpload:t,fileList:a,setFileList:i,uploadMaxCount:s}=e,{uploadAction:d,filesMaxCount:g}=n||{},{message:p}=F.useApp(),{t:v}=S();return r.jsx(K.Dragger,{action:d,fileList:a,multiple:!0,pastable:!0,maxCount:s?s+1:void 0,onChange:f=>{if(s&&f.fileList.length>s){p.warning(v("@fe-free/ai.sender.exceedMaxUploadCount","超过最大上传数量{count}",{count:g})),i(f.fileList.slice(-s));return}i(f.fileList)},children:r.jsx("div",{ref:t,children:v("@fe-free/ai.sender.dragFileHere","在此处拖放文件")})})}function Te({file:e,onDelete:n}){const t=U.isImage(e.name),a=e.response?.data?.url;return r.jsxs("div",{className:"group relative",children:[t?r.jsx(T,{url:URL.createObjectURL(e.originFileObj),isImage:t}):r.jsx(T,{url:e.name}),!a&&r.jsxs("div",{className:"absolute inset-0 flex items-center justify-center bg-01/80",children:[(e.percent??0).toFixed(0),"%"]}),r.jsx(P,{className:"absolute right-1 top-1 hidden cursor-pointer rounded-full bg-04 text-white group-hover:block",onClick:n})]})}function qe({url:e,onDelete:n}){return r.jsxs("div",{className:"group relative",children:[r.jsx("div",{className:"flex h-[60px] w-[250px] items-center rounded bg-01 px-2",children:r.jsx("div",{className:"line-clamp-2",children:e})}),r.jsx(P,{className:"absolute right-1 top-1 hidden cursor-pointer rounded-full bg-04 text-white group-hover:block",onClick:n})]})}function H(e){const{fileList:n,setFileList:t,fileUrls:a,setFileUrls:i}=e;return r.jsx(r.Fragment,{children:(n&&n.length>0||a&&a.length>0)&&r.jsxs("div",{className:"scrollbar-hide mb-2 flex gap-2 overflow-x-auto",children:[n.map(s=>r.jsx(Te,{file:s,onDelete:()=>{t(n.filter(d=>d.uid!==s.uid))}},s.uid)),a.map(s=>r.jsx(qe,{url:s,onDelete:()=>{i(a.filter(d=>d!==s))}},s))]})})}I.__docgenInfo={description:"",methods:[],displayName:"FileAction",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},refUpload:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},fileUrls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setFileUrls:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileUrls: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"fileUrls"}],return:{name:"void"}}},description:""}}};H.__docgenInfo={description:"",methods:[],displayName:"Files",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},setFileList:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileList: UploadFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},name:"fileList"}],return:{name:"void"}}},description:""},fileUrls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setFileUrls:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileUrls: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"fileUrls"}],return:{name:"void"}}},description:""}}};_.__docgenInfo={description:"",methods:[],displayName:"FileUpload",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},refUpload:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},setFileList:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileList: UploadFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},name:"fileList"}],return:{name:"void"}}},description:""},uploadMaxCount:{required:!1,tsType:{name:"number"},description:""}}};function O(e){const{allowSpeech:n}=e,{recording:t,onRecordingChange:a}=n||{};return t?r.jsx(b,{type:"text",shape:"circle",onClick:()=>a?.(!1),children:r.jsx(M,{count:4,color:"primary"})}):r.jsx(b,{type:"text",shape:"circle",icon:r.jsx(te,{className:"!text-lg"}),onClick:()=>a?.(!0)})}O.__docgenInfo={description:"",methods:[],displayName:"RecordAction",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"}}};function Z(e){const{refText:n,loading:t,onSubmit:a,value:i,onChange:s,refUpload:d,isUploading:g,setFileList:p,fileUrls:v,setFileUrls:f,allowUpload:l,allowSpeech:u}=e,c=t||g,m=o.useCallback(async()=>{if(c||u?.recording)return;const h={...i,text:i?.text?.trim()};(h.text||h.files&&h.files.length>0)&&(await Promise.resolve(a?.(h)),p([]),f([]),s?.({}),n.current?.focus())},[c,u?.recording,i,a,p,f,s,n]);return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex flex-1 gap-1",children:l&&r.jsx(I,{...e,refUpload:d,fileUrls:v,setFileUrls:f})}),r.jsx(ae,{type:"vertical"}),r.jsxs("div",{className:"flex items-center gap-2",children:[u&&r.jsx(O,{...e}),r.jsx(b,{type:"primary",shape:"circle",icon:r.jsx(C,{component:E,className:"!text-lg"}),loading:c,onClick:m})]})]})}Z.__docgenInfo={description:"",methods:[],displayName:"Actions",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"},refText:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLTextAreaElement"}],raw:"RefObject<HTMLTextAreaElement>"},description:""},refUpload:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},isUploading:{required:!0,tsType:{name:"boolean"},description:""},fileList:{required:!0,tsType:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},description:""},setFileList:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileList: UploadFile[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"UploadFile"}],raw:"UploadFile[]"},name:"fileList"}],return:{name:"void"}}},description:""},fileUrls:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},setFileUrls:{required:!0,tsType:{name:"signature",type:"function",raw:"(fileUrls: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"fileUrls"}],return:{name:"void"}}},description:""}}};function Se(e){const{value:n,onChange:t,placeholder:a,refText:i}=e;return r.jsx(L.TextArea,{ref:i,value:n?.text,onChange:s=>{t?.({...n,text:s.target.value})},placeholder:a,autoSize:{minRows:2,maxRows:8},className:"mb-1 px-1 py-0",variant:"borderless"})}function je(e){const{t:n}=S(),t=o.useMemo(()=>({placeholder:e.placeholder??n("@fe-free/ai.sender.describeYourQuestion","描述你的问题"),...e}),[e,n]),a=o.useRef(null),{value:i,onChange:s,allowUpload:d}=t,{filesMaxCount:g}=d||{},p=o.useRef(null),v=o.useRef(null),[f,l]=o.useState(!1);ie(p,{onDragEnter:()=>{l(!0)},onDragLeave:()=>{l(!1)},onDrop:()=>{l(!1)}});const[u,c]=o.useState([]),[m,h]=o.useState([]),w=o.useCallback(({fileUrls:x,fileList:$})=>{s?.({...i,files:[...$.map(Y=>Y.response?.data?.url)||[],...x]})},[i,s]),V=o.useCallback(x=>{c(x),w({fileUrls:x,fileList:m})},[m,w]),j=o.useCallback(x=>{h(x),w({fileUrls:u,fileList:x})},[u,w]),B=o.useMemo(()=>m.some(x=>!x.response?.data?.url),[m]);return r.jsxs("div",{className:"fea-sender-wrap",children:[r.jsxs("div",{ref:p,className:q("fea-sender relative flex flex-col rounded-xl border border-01 bg-white p-2",{"fea-sender-drag-hover":f}),children:[r.jsx(H,{...t,fileList:m,setFileList:j,fileUrls:u,setFileUrls:V}),r.jsx("div",{className:"flex",children:r.jsx(Se,{...t,refText:a})}),r.jsx(Z,{...t,refText:a,refUpload:v,isUploading:B,fileList:m,setFileList:j,fileUrls:u,setFileUrls:V}),r.jsx(_,{...t,refUpload:v,fileList:m,setFileList:j,uploadMaxCount:g?g-u.length:void 0})]}),r.jsx("div",{className:"mt-1 text-center text-xs text-03",children:n("@fe-free/ai.sender.aiGeneratedDisclaimer","内容由 AI 生成，无法确保信息的真实准确，仅供参考")})]})}je.__docgenInfo={description:"",methods:[],displayName:"Sender",props:{value:{required:!1,tsType:{name:"SenderValue"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"void"}}},description:""},loading:{required:!1,tsType:{name:"boolean"},description:""},onSubmit:{required:!1,tsType:{name:"signature",type:"function",raw:"(value?: SenderValue) => void | Promise<void>",signature:{arguments:[{type:{name:"SenderValue"},name:"value"}],return:{name:"union",raw:"void | Promise<void>",elements:[{name:"void"},{name:"Promise",elements:[{name:"void"}],raw:"Promise<void>"}]}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:""},allowUpload:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 上传文件的接口地址，约定返回的 {data: {url: string}} */
  uploadAction?: string;
  /** files 最大数量 */
  filesMaxCount?: number;
}`,signature:{properties:[{key:"uploadAction",value:{name:"string",required:!1},description:"上传文件的接口地址，约定返回的 {data: {url: string}}"},{key:"filesMaxCount",value:{name:"number",required:!1},description:"files 最大数量"}]}},description:""},allowSpeech:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  /** 是否正在录音 */
  recording?: boolean;
  /** 录音状态变化时回调 */
  onRecordingChange?: (recording: boolean) => void;
}`,signature:{properties:[{key:"recording",value:{name:"boolean",required:!1},description:"是否正在录音"},{key:"onRecordingChange",value:{name:"signature",type:"function",raw:"(recording: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"recording"}],return:{name:"void"}},required:!1},description:"录音状态变化时回调"}]}},description:"是否允许语音输入"}}};export{se as C,le as F,we as M,je as S,Ce as a,Le as g};
