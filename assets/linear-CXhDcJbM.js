import{aC as g,aD as A}from"./index-CeKBVpXv.js";import{lO as p,lP as d,lQ as y,lR as N,lS as x,lT as R,lU as j,lV as S,aj as D,lW as F,lX as P}from"./iframe-CMPoagji.js";import{i as V}from"./init-Gi6I4Gst.js";function I(n){return Math.max(0,-p(Math.abs(n)))}function O(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(p(r)/3)))*3-p(Math.abs(n)))}function T(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,p(r)-p(n))+1}function z(n,r){r||(r=[]);var e=n?Math.min(r.length,n.length):0,t=r.slice(),i;return function(u){for(i=0;i<e;++i)t[i]=n[i]*(1-u)+r[i]*u;return t}}function B(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function C(n,r){var e=r?r.length:0,t=n?Math.min(e,n.length):0,i=new Array(t),u=new Array(e),a;for(a=0;a<t;++a)i[a]=M(n[a],r[a]);for(;a<e;++a)u[a]=r[a];return function(c){for(a=0;a<t;++a)u[a]=i[a](c);return u}}function Q(n,r){var e=new Date;return n=+n,r=+r,function(t){return e.setTime(n*(1-t)+r*t),e}}function U(n,r){var e={},t={},i;(n===null||typeof n!="object")&&(n={}),(r===null||typeof r!="object")&&(r={});for(i in r)i in n?e[i]=M(n[i],r[i]):t[i]=r[i];return function(u){for(i in e)t[i]=e[i](u);return t}}function M(n,r){var e=typeof r,t;return r==null||e==="boolean"?d(r):(e==="number"?g:e==="string"?(t=N(r))?(r=t,y):A:r instanceof N?y:r instanceof Date?Q:B(r)?z:Array.isArray(r)?C:typeof r.valueOf!="function"&&typeof r.toString!="function"||isNaN(r)?U:g)(n,r)}function W(n,r){return n=+n,r=+r,function(e){return Math.round(n*(1-e)+r*e)}}function X(n){return function(){return n}}function $(n){return+n}var w=[0,1];function h(n){return n}function v(n,r){return(r-=n=+n)?function(e){return(e-n)/r}:X(isNaN(r)?NaN:.5)}function q(n,r){var e;return n>r&&(e=n,n=r,r=e),function(t){return Math.max(n,Math.min(r,t))}}function E(n,r,e){var t=n[0],i=n[1],u=r[0],a=r[1];return i<t?(t=v(i,t),u=e(a,u)):(t=v(t,i),u=e(u,a)),function(c){return u(t(c))}}function G(n,r,e){var t=Math.min(n.length,r.length)-1,i=new Array(t),u=new Array(t),a=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++a<t;)i[a]=v(n[a],n[a+1]),u[a]=e(r[a],r[a+1]);return function(c){var l=x(n,c,1,t)-1;return u[l](i[l](c))}}function H(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function J(){var n=w,r=w,e=M,t,i,u,a=h,c,l,f;function m(){var o=Math.min(n.length,r.length);return a!==h&&(a=q(n[0],n[o-1])),c=o>2?G:E,l=f=null,s}function s(o){return o==null||isNaN(o=+o)?u:(l||(l=c(n.map(t),r,e)))(t(a(o)))}return s.invert=function(o){return a(i((f||(f=c(r,n.map(t),g)))(o)))},s.domain=function(o){return arguments.length?(n=Array.from(o,$),m()):n.slice()},s.range=function(o){return arguments.length?(r=Array.from(o),m()):r.slice()},s.rangeRound=function(o){return r=Array.from(o),e=W,m()},s.clamp=function(o){return arguments.length?(a=o?!0:h,m()):a!==h},s.interpolate=function(o){return arguments.length?(e=o,m()):e},s.unknown=function(o){return arguments.length?(u=o,s):u},function(o,k){return t=o,i=k,m()}}function K(){return J()(h,h)}function L(n,r,e,t){var i=R(n,r,e),u;switch(t=j(t??",f"),t.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(u=O(i,a))&&(t.precision=u),S(t,a)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(u=T(i,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=u-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(u=I(i))&&(t.precision=u-(t.type==="%")*2);break}}return D(t)}function Y(n){var r=n.domain;return n.ticks=function(e){var t=r();return F(t[0],t[t.length-1],e??10)},n.tickFormat=function(e,t){var i=r();return L(i[0],i[i.length-1],e??10,t)},n.nice=function(e){e==null&&(e=10);var t=r(),i=0,u=t.length-1,a=t[i],c=t[u],l,f,m=10;for(c<a&&(f=a,a=c,c=f,f=i,i=u,u=f);m-- >0;){if(f=P(a,c,e),f===l)return t[i]=a,t[u]=c,r(t);if(f>0)a=Math.floor(a/f)*f,c=Math.ceil(c/f)*f;else if(f<0)a=Math.ceil(a*f)/f,c=Math.floor(c*f)/f;else break;l=f}return n},n}function Z(){var n=K();return n.copy=function(){return H(n,Z())},V.apply(n,arguments),Y(n)}export{H as a,K as c,Z as l};
