import{j as r}from"./jsx-runtime-VCcGjxbf.js";import{_ as y,x as v,P as C,a as c,y as P,z as T,A as F,d as M,D as h,w as R,t as S}from"./localforage-jNGLhox0.js";import{g as p}from"./date-CvgjZid_.js";import{e as N,r as j}from"./iframe-Dz6Nc1QS.js";import{d}from"./isNumber-DKtQc1Du.js";import"./index-BCE3KO5C.js";import"./index-Cc8IMFZa.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";var I=["fieldProps","proFieldProps"],f="dateRange",O=N.forwardRef(function(e,a){var t=e.fieldProps,n=e.proFieldProps,s=y(e,I),i=j.useContext(v);return r.jsx(C,c({ref:a,fieldProps:c({getPopupContainer:i.getPopupContainer},t),valueType:f,proFieldProps:n,filedConfig:{valueType:f,customLightMode:!0,lightFilterLabelFormatter:function(D){return P(D,t?.format||"YYYY-MM-DD")}}},s))});const b={dateTime:e=>e?r.jsx("div",{children:p(e).format("YYYY-MM-DD HH:mm:ss")}):r.jsx("div",{children:"-"}),date:e=>e?r.jsx("div",{children:p(e).format("YYYY-MM-DD")}):r.jsx("div",{children:"-"})},w={dateRange:(e,a)=>r.jsx(O,{...a,fieldProps:{...a.fieldProps,onChange:t=>{const n=t&&[d(t[0]).startOf("day"),d(t[1]).endOf("day")];a.fieldProps.onChange?.(n)}}})},l={renderMap:b,renderFormItemMap:w};function J(e){let a=e;if(!e)return r.jsx("div",{children:"-"});try{a=JSON.stringify(JSON.parse(e),null,2)}catch(t){console.error(t,e)}return r.jsx(T.Text,{className:"block max-w-full overflow-hidden",ellipsis:{tooltip:{title:r.jsx("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word"},children:a})}},children:e})}const g={render:J,renderFormItem:()=>r.jsx(r.Fragment,{})};function A(e,a){const{title:t="查看"}=a.fieldProps||{},[n,s]=j.useState(!1);let i=e;if(!e)return r.jsx("div",{children:"-"});try{i=JSON.stringify(JSON.parse(e),null,2)}catch(u){console.error(u,e)}return r.jsxs(r.Fragment,{children:[r.jsx("a",{onClick:()=>s(!0),children:t}),r.jsx(F,{title:t,open:n,onCancel:()=>s(!1),onOk:()=>s(!1),cancelButtonProps:{style:{display:"none"}},children:r.jsx("div",{className:"h-[500px]",children:r.jsx(M,{value:i,readonly:!0})})})]})}const x={render:A,renderFormItem:()=>r.jsx(r.Fragment,{})};var o=(e=>(e.CustomDateTimeAndDateRange="CustomDateTimeAndDateRange",e.CustomDateAndDateRange="CustomDateAndDateRange",e.CustomJSON="CustomJSON",e.CustomJSONModal="CustomJSONModal",e))(o||{});const Y={CustomDateTimeAndDateRange:{render:l.renderMap.dateTime,renderFormItem:l.renderFormItemMap.dateRange},CustomDateAndDateRange:{render:l.renderMap.date,renderFormItem:l.renderFormItemMap.dateRange},CustomJSON:{render:g.render,renderFormItem:g.renderFormItem},CustomJSONModal:{render:x.render,renderFormItem:x.renderFormItem}},V={title:"@fe-free/core/ValueTypeMap",component:h,parameters:{layout:"centered"},tags:["autodocs"]};async function k(){const e=S(5).map(a=>({id:`${a}`,timeStr:"2024-10-01 10:00:00",timeNumber:+d("2024-10-01 10:00:00"),dateStr:"2024-10-01",dateNumber:+d("2024-10-01"),seconds:Math.abs(+d("2024-10-01")/1e3),jsonText:JSON.stringify({name:"hello world hello world hello world"})}));return Promise.resolve({data:e,success:!0,total:100})}const _=()=>{const e=[{title:"id",dataIndex:"id"},{title:"时间 str",dataIndex:"timeStr",valueType:o.CustomDateTimeAndDateRange,search:!0},{title:"时间 number",dataIndex:"timeNumber",valueType:o.CustomDateTimeAndDateRange,search:!0},{title:"日期 str",dataIndex:"dateStr",valueType:o.CustomDateAndDateRange,search:!0},{title:"日期 number",dataIndex:"dateNumber",valueType:o.CustomDateAndDateRange,search:!0},{title:"日期 number 秒",dataIndex:"seconds",valueType:o.CustomDateAndDateRange,search:!0},{title:"json",dataIndex:"jsonText",ellipsis:!0,valueType:o.CustomJSON},{title:"jsonModal",dataIndex:"jsonText",ellipsis:!0,valueType:o.CustomJSONModal}];return r.jsx(R,{actions:[],tableProps:{columns:e,request:k}})},m={render:()=>r.jsx(h,{valueTypeMap:Y,children:r.jsx(_,{})})};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  render: () => <ProConfigProvider valueTypeMap={customValueTypeMap}>
      <Table />
    </ProConfigProvider>
}`,...m.parameters?.docs?.source}}};const $=["Default"];export{m as Default,$ as __namedExportsOrder,V as default};
